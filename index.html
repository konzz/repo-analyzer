<html>
  <head>
    <title>Uwazi Issues Analysis</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="index.css" />
    {{data}}
    <script src="charts.js"></script>
    <script src="charts/utils.js"></script>
    <script src="charts/labels.js"></script>
    <script src="charts/timeToCloseDistributedBar.js"></script>
    <script src="charts/issuesByPointsDistribution.js"></script>
    <script src="charts/pointsPerSprint.js"></script>
    <script src="charts/timeToCloseByPointsScatter.js"></script>
  </head>
  <body>
    <h1>Uwazi Issues Analysis since {{date}}</h1>
    <div class="analysis">
      <h2>Issues Closed</h2>
      <h3>{{issuesClosed}}</h3>
    </div>
    <div class="analysis">
      <h2>Average time to close an issue</h2>
      <h3>{{avgTimeToCloseIssue}} days</h3>
    </div>
    <div class="analysis">
      <div class="row">
        <h2>Minimum time to close an issue</h2>
        <h2>Maximum time to close an issue</h2>
      </div>
      <div class="row">
        <h3>{{minTimeToCloseIssue}} days</h3>
        <h3>{{maxTimeToCloseIssue}} days</h3>
      </div>
    </div>
    <div class="analysis">
      <h2>Average time to close a PR</h2>
      <h3>{{avgTimeToClosePr}} days</h3>
    </div>
    <div class="analysis">
      <div class="row">
        <h2>Minimum time to close a PR</h2>
        <h2>Maximum time to close a PR</h2>
      </div>
      <div class="row">
        <h3>{{minTimeToClosePr}} days</h3>
        <h3>{{maxTimeToClosePr}} days</h3>
      </div>
    </div>
    <div class="analysis">
      <h2>How are this numbers calculated?</h2>
      <ul>
        <li>
          Only issues with tag <span class="badge sprint">Sprint</span> were
          processed.
        </li>
        <li>
          An issue is considered started when label
          <span class="badge sprint">Sprint</span> is added to it.
        </li>
        <li>
          An issue is considered closed when in the last
          <span class="badge closed">Closed</span> event.
        </li>
        <li>
          A pull request is considered started on the event
          <span class="badge ready">Ready for review</span> or if does not have
          this event, it's considered since
          <span class="badge ready">Open</span>.
        </li>
        <li>
          Days are natural days and have weekends and any other holiday
          included.
        </li>
        <li>
          Used some <span class="wizzard">üßô‚Äç‚ôÇÔ∏è</span>Dark Magic (math) to remove
          <a
            href="https://en.wikipedia.org/wiki/Outlier"
            title="Wikipedia - Outlier"
            >outliers</a
          >
          from the data when calculating averages.
        </li>
      </ul>
    </div>

    <div class="analysis">
      <h2>Days to close distribution</h2>
      <canvas id="time-to-close-issue-chart"></canvas>
      <div id="time-to-close-actions" class="actions"></div>
    </div>
    <div class="analysis">
      <h2>Points done</h2>
      <h3>{{pointsDone}}</h3>
    </div>
    <div class="analysis">
      <div class="row">
        <h2>Total days acumulated</h2>
        <h2>Days per point</h2>
      </div>
      <div class="row">
        <h3>{{totalDays}} days</h3>
        <h3>{{averageTimePerPoint}} days</h3>
      </div>
    </div>
    <div class="analysis">
      <h2>Points per sprint</h2>
      <canvas id="points-per-sprint"></canvas>
    </div>
    <div class="analysis">
      <h2>Issues by points distribution</h2>
      <canvas id="issues-by-points-distribution"></canvas>
    </div>
    <div class="analysis">
      <h2>Average time to close by points</h2>
      <canvas id="avg-time-to-close-by-points"></canvas>
    </div>
    <div class="analysis">
      <h2>Days to close issues by points</h2>
      <canvas id="time-to-close-by-points-scatter"></canvas>
    </div>

    <div class="analysis">
      <h2>Label distribution</h2>
      <div class="pie"><canvas id="labels-chart"></canvas></div>
    </div>
  </body>
</html>
